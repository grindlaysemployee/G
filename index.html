<!DOCTYPE html>
<html>
<head>
  <title>Employee Login</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="login-box">
    <h2>Login</h2>
    <input type="text" id="empid" placeholder="Employee ID" autofocus>
    <input type="password" id="password" placeholder="Password">
    <button onclick="login()">Login</button>
    <p id="error" style="color: red;"></p>
  </div>

  <script>
    async function login() {
      const empid = document.getElementById("empid").value.trim();
      const password = document.getElementById("password").value.trim();

      const apiUrl = `https://script.google.com/macros/s/AKfycbwHqEiiudOUcLFIw_IBizrfhacpWoqhNTqjBikac5YaTjhotypHY53Vb3J9-hYXSPaT/exec?empid=${empid}&password=${password}`;

      try {
        const response = await fetch(apiUrl);
        const data = await response.json();

        if (data.success) {
          localStorage.setItem("employee", JSON.stringify(data.employee));
          window.location.href = "dashboard.html";
        } else {
          document.getElementById("error").innerText = data.message;
        }
      } catch (err) {
        document.getElementById("error").innerText = "API error. Please try again.";
      }
    }
  </script>
</body>
</html>
